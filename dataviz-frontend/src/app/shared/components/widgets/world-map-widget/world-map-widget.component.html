<!-- src/app/components/france-regional-maps/france-regional-maps.component.html -->
<div class="france-regional-maps-container flex flex-col md:flex-row h-full w-full gap-4 bg-white rounded-lg" [ngClass]="{'one-by-two': isOneByTwo}">

    <!-- Students Map Container -->
    <div *ngIf="widget?.widgetSubType === 'STUDENT_REGION_DISTRIBUTION'"
        class="map-card flex-1 bg-white rounded-lg overflow-hidden flex flex-col min-h-0" [ngClass]="{'one-by-two': isOneByTwo}">
       <div class="flex items-center justify-between px-4 pt-4 flex-shrink-0">
            <div class="chart-legend flex-shrink-0">Total Data : {{ totalStudentData }}</div>
            <div class="flex-1 flex justify-center">
            <h3 class="text-lg font-semibold border-b-0 text-center text-gray-800 m-0 mt-4">{{ widget?.name }}</h3>
            </div>
            <div class="w-40"></div> <!-- Spacer to balance the left side -->
        </div>
        <div class="flex gap-4 px-4 mt-3 flex-1 min-h-0" [ngClass]="isNarrow ? 'flex-col' : 'flex-row'">
            <ul *ngIf="!isOneByTwo && !isOneByOne" class="region-names-list p-0 flex-shrink-0 overflow-y-auto max-h-full" [ngClass]="isNarrow ? 'w-full' : 'w-64'">
                <li *ngFor="let key of studentDataList" class="py-1">
                    <span 
                        class="font-medium inline-block align-middle mr-2" 
                        [ngStyle]="{
                            'background-color': manualColorMapSalaries[key.code]?.toCSSString ? manualColorMapSalaries[key.code].toCSSString() : manualColorMapSalaries[key.code],
                            'width': '20px',
                            'height': '20px',
                            'display': 'inline-block',
                            'border-radius': '4px'
                        }">
                    </span>
                    <span class="legend-label">{{ key.name }}: </span>
                    <span class="legend-label">{{ key.count }}</span>
                </li>
            </ul>
            <div class="map-and-legend-wrapper flex flex-grow min-h-0" [ngClass]="isOneByTwo ? 'w-full' : ''">
                <div [id]="studentsMapId" class="map-chart-container h-full w-full"></div>
            </div>
        </div>
        
        <ng-container *ngIf="!studentsData">
            <div class="no-data-overlay">
                <mat-icon class="text-5xl text-gray-400">map</mat-icon>
                <p class="text-lg font-medium mt-2">No Students Data</p>
            </div>
        </ng-container>
    </div>

    <!-- Salary Map Container -->
    <div *ngIf="widget?.widgetSubType === 'REGION_SALARY_AVERAGE'"
        class="map-card flex-1 bg-white rounded-lg overflow-hidden flex flex-col min-h-0" [ngClass]="{'one-by-two': isOneByTwo}">
        <div class="flex items-center justify-between px-4 pt-4 flex-shrink-0">
            <div class="chart-legend flex-shrink-0">Total Data : {{ totalSalaryData }}</div>
            <div class="flex-1 flex justify-center">
            <h3 class="text-lg font-semibold border-b-0 text-center text-gray-800 m-0  mt-4">{{ widget?.name }}</h3>
            </div>
            <div class="w-40"></div> <!-- Spacer to balance the left side -->
        </div>
        <div class="flex gap-4 px-4 mt-3 flex-1 min-h-0" [ngClass]="isNarrow ? 'flex-col' : 'flex-row'">
            <ul *ngIf="!isOneByTwo && !isOneByOne" class="region-names-list p-0 flex-shrink-0 overflow-y-auto max-h-full" [ngClass]="isNarrow ? 'w-full' : 'w-64'">
                <li *ngFor="let key of salaryDataList " class="py-1">
                    <span 
                        class="font-medium inline-block align-middle mr-2" 
                        [ngStyle]="{
                            'background-color': manualColorMapSalaries[key.code]?.toCSSString ? manualColorMapSalaries[key.code].toCSSString() : manualColorMapSalaries[key.code],
                            'width': '20px',
                            'height': '20px',
                            'display': 'inline-block',
                            'border-radius': '4px'
                        }">
                    </span>
                    <span class="legend-label">{{ key.name }}: </span>
                    <span class="legend-label">{{ key.averageSalary | number}} â‚¬</span>
                </li>
            </ul>
            <div class="map-and-legend-wrapper flex flex-grow min-h-0" [ngClass]="isOneByTwo ? 'w-full' : ''">
                <div [id]="salaryMapId" class="map-chart-container w-full h-full"></div>
            </div>
        </div>
        <ng-container *ngIf="!salaryData">
            <div class="no-data-overlay">
                <mat-icon class="text-5xl text-gray-400">map</mat-icon>
                <p class="text-lg font-medium mt-2">No Salary Data</p>
            </div>
        </ng-container>
    </div>
</div>